(function(e){function v(e,t){return Promise.resolve(r.post(n.Conf.API_ROOT+"process_login.php",{login:e,password:t},null,"json")).then(function(e){if(e.result&&e.result[0]){f=parseInt(e.result[0].mid);l=e.result[0].acc;if(!f){return Promise.reject(Error("No member ID"))}return e.result[0]}else{return Promise.reject(Error("Invalid data from the server"))}})}function m(){r.post(n.Conf.API_ROOT+"process_logout.php")}function g(){d=Promise.resolve(r.post(n.Conf.API_ROOT+"process_getinitdata.php",null,null,"json")).then(function(e){c=e.AdminStaff;h=r.map(e.classroom,function(e){return{id:e.crid,name:e.place}});p=r.map(e.tutor,function(e){var t={name:e.n,id:e.mid};t.colour=E(t);return t})})}function y(){return Promise.resolve(d).then(function(){return p})}function b(e){var t;if(p&&e){r.each(p,function(n,r){if(r.id==e){t=r;return false}});return t}return Promise.resolve(d.then(function(){return p}))}function w(e,t){var n;if(!e){return{name:"",colour:"#999999"}}if(p){r.each(p,function(t,r){if(r.name==e){n=r;return false}})}if(!n&&t){n={name:e};n.colour=E(n);p.push(n)}return n}function E(e){if(!e.hash){e.hash=SparkMD5.hash(e.name)}return"#"+e.hash.substr(0,6)}function S(e){return x(e)}function x(e){var t;if(h&&e){r.each(h,function(n,r){if(r.id==e){t=r;return false}});return t}return Promise.resolve(d.then(function(){return h}))}function T(e){var t;if(!e){return{id:0,name:""}}if(h){r.each(h,function(n,r){if(r.name==e){t=r;return false}})}return t}function N(e){return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}function C(e){e.name=r.trim(e.name);var t=e.name.match(/\w+/g);if(!t){return}else if(t.length==1){e.forename=t[0];e.surname="";e.englishName=e.forename;e.chineseName=e.englishName}else if(t.length==2){e.forename=t[0];e.surname=t[1];e.englishName=t[0]+" "+t[1];e.chineseName=e.englishName}else if(t.length==3){e.forename="";e.surname=t[0];e.chineseName=t[0]+" "+t[1]+" "+t[2];e.englishName=e.chineseName}else if(a.indexOf(t[0])>-1){e.forename=t[3];e.surname=t[0];e.englishName=e.forename+" "+e.surname;e.chineseName=t[0]+" "+t[1]+" "+t[2]}else{e.forename=t[0];e.surname=t[1];e.englishName=e.forename+" "+e.surname;e.chineseName=t[1]+" "+t[2]+" "+t[3]}}var t=e.iLearner||{},n=t,r=e.jQuery,i={API_ROOT:"/",PHOTO_URL:"/photos"},s=t.Tutor||{},o=t.Room||{},u=t.Util||{},a="Chan Chang Cheng Cheung Chin Ching Chiu Choi Chow Chu Chui Chun Chung Fan Fong Foo Fu Fung"+" Ha Hau Heung Ho Hon Hong Hooi Hui Hung Ka Kam Keung Kiu Ko Kok Kong Ku Kung Kwok Lai Lam Lau Lay"+" Lee Leung Li Liu Lo Loong Lui Luk Lung Ma Man Mang Mo Mok Ng Ngai Pak Pang Poon Sek Shek Sheung"+" Shiu Sit Siu So Suen Sum Sung Sze Tai Tam Tang Tin Ting To Tong Tong Tou Tsang Tse Tseung Tso Tsui"+" Tuen Tung Wai Wan Wong Wong Wu Yam Yau Yeung Yim Yip Yiu Yu Yue Yuen".split(" "),f,l,c,h,p,d;e.iL=t;e.iLearner=t;n.Conf=r.extend({},i,n.Conf);t.Tutor=s;t.Room=o;t.Util=u;n.API_ROOT=n.Conf.API_ROOT;g();t.Login=v;t.Logout=m;s.all=y;s.get=b;t.getTutors=b;s.find=w;t.findTutor=w;s.colour=E;t.getRoom=S;o.all=x;o.get=x;t.getRooms=x;o.find=T;t.findRoom=T;u.formatDate=N;t.formatDate=N;u.parseName=C;t.parseName=C;e.iLearner=t})(window);(function(e){function m(e){return f[e]}function g(){var e=Array.prototype.slice.call(arguments),t,n,r;if(e.length==2){return b(e[0],e[1])}t=$.isPlainObject(e[0])?e[0]:{};if(t.course){return L(t.course)}if(!t.start){t.start=new Date}n={sDate:iL.formatDate(t.start)};if(t.tutor){n.Tutor=t.tutor.id}r=JSON.stringify(n);if(!p[r]){p[r]=Promise.resolve($.post(iL.API_ROOT+"process_getCalendarData.php",n,null,"json")).then(function(e){var t=[];$.each(e.CalendarCourse,function(e,n){var r=new Date(n.ScheduleDate),i=new Date(n.ScheduleDate),u=iL.Tutor.find(n.Tutor,true),l=n.Coursetitle.match(s),c=n.Coursetitle.replace(s,""),h=n.CourseID,p=n.CourseScheduleID,d=a[h]||{id:h,lessons:[]},v=f[p]||{id:p,start:r,end:i,room:iL.Room.find(n.Location),tutor:u,attendees:[]};d.code=n.CourseName;d.title=c;d.level=null;d.day=r.getDay();d.startTime=n.Starttime;d.endTime=n.endtime;d.tutor=u;H(r,n.Starttime);H(i,n.endtime);l=l&&l[0].replace(" ","");if(!l){$.each(o,function(e,t){if(t.regex.test(c)){l=t.level;return false}})}d.level=l;a[d.id]=d;v.attendees.length=0;f[v.id]=v;v.course=d;if(!d.lessons){d.lessons=[]}if(d.lessons.indexOf(v)==-1){d.lessons.push(v)}t.push(v)});$.each(e.CalendarStudent,function(e,t){var n=iL.Student.get(t.MemberID)||{id:t.MemberID,name:t.nickname,photo:t.Accountname},r=f[t.CourseScheduleID],i=A(r,n)||{memberCourseID:null,lesson:r,student:n},s=r&&D(r,n);i.absent=t.Attendance=="0";iL.Util.parseName(n);r&&r.attendees.push(i);l[s]=i;iL.Student.add(n)});return t})}return p[r]}function y(e){var t=e.start.getHours(),n=e.end.getHours(),r=t<12?"AM":"PM",i=n<12?"AM":"PM",s={Action:"update",insertMode:null,tid:e.tutor.id,cstatus:0,courseID:e.course.id,coursescheduleID:e.id,cssid:e.course.id,csid:e.room.id,sdate:iL.formatDate(e.start),timefrom:P(t),minutesfrom:P(e.start.getMinutes()),fromdt:r,timeto:P(n),minutesto:P(e.end.getMinutes()),todt:i,mon:0,tue:0,wed:0,thu:0,fri:0,sat:0,sun:0,coursetypechanged:0,orignal_coursetype:0},o=$.Deferred();$.post(iL.API_ROOT+"process_updateCourseSchedule.php",s,function(e){if(e.statuscode==1){o.resolve()}else{o.reject()}},"json").fail(o.reject);return o.promise()}function b(e,t){var n=e.id;if(!d[n]){d[n]={}}if(!d[n][t]){d[n][t]=r.lessons(e.course).then(function(n){var r=n.indexOf(e);if(t=="previous"){return n.slice(r-1,r)}else if(t=="next"){return n.slice(r+1,r+2)}else if(t=="future"){return n.slice(r)}else if(t=="past"){return n.slice(0,r+1)}})}return d[n][t]}function w(e){return g(e,"previous").then(function(e){return e[0]})}function E(e){return g(e,"next").then(function(e){return e[0]})}function S(e){return g(e,"future")}function x(e){return O({lesson:e}).then(function(e){return e.map(function(e){return e.student})})}function T(e){return a[e]}function N(e){a[e.id]=e}function C(e){var t=new Date,n=e.code?{searchCouseCode:e.code}:{searchCourseTitle:e.title,searchCourseCourseYear:e.year||t.getFullYear(),searchCourseCourseMonth:e.month||t.getMonth()+1,searchTutor:e.tutor&&e.tutor.id},r=JSON.stringify(n);if(!c[r]){if(e.code){$.each(a,function(t,n){if(n.code==e.code){c[r]=Promise.resolve([n]);return false}});if(c[r]){return c[r]}}c[r]=Promise.resolve($.post(iL.API_ROOT+"process_getCourseList.php",n,null,"json")).then(function(e){var t=[];$.each(e.courselist,function(e,n){var r=n.CourseID,i=n.CourseName.match(s),u=n.CourseName.replace(s,""),f=a[r]||{id:r,lessons:[]};i=i&&i[0].replace(" ","");if(!i){$.each(o,function(e,t){if(t.regex.test(u)){i=t.level;return false}})}f.title=u;f.code=n.coursecode;f.level=i;f.subject=n.subject;a[r]=f;t.push(f)});$.each(e.courseschedule,function(e,t){var n=new Date(t.ScheduleDate),r=new Date(t.ScheduleDate),i=iL.Tutor.find(t.tutorname,true),s=t.CourseID,o=t.CourseScheduleID,u=a[s]||{id:s,lessons:[]},l=f[o]||{id:o,start:n,end:r,room:iL.Room.find(t.location),tutor:i,attendees:[]};u.day=n.getDay();u.startTime=t.Starttime;u.endTime=t.endtime;u.tutor=i;H(n,t.Starttime);H(r,t.endtime);a[u.id]=u;f[l.id]=l;l.course=u;if(u.lessons.indexOf(l)==-1){u.lessons.push(l)}});return t})}return c[r]}function k(e){if(!h[e.id]){h[e.id]=Promise.resolve($.post(iL.API_ROOT+"process_getCourseDetail.php",{courseID:e.id},null,"json")).then(function(t){var n=t.coursedetail[0];e.code=n.CourseCode;e.title=n.CourseName.replace(s,"");e.room=iL.Room.get(n.DefaultClassroomID);e.paymentCycle=n.DefaultPaymentCycle=="2"?"lesson":"monthly";e.existingDiscount=n.DiscountForOldStudent;e.pricePerLesson=n.LessonFee;e.pricePerMonth=n.MonthlyFee;e.notes=n.Remark=="null"?"":n.Remark;e.subject=null;e.tutor=iL.Tutor.get(n.TutorMemberID);e.level=B(n);if(!e.level){e.level=n.CourseName.match(s)}if(!e.lessons){e.lessons=[]}$.each(t.coursedetailschedule,function(t,n){var r=new Date(n.ScheduleDate),i=new Date(n.ScheduleDate),s;if(f[n.CourseScheduleID]){s=f[n.CourseScheduleID]}else{s={id:n.CourseScheduleID,start:r,end:i,room:iL.Room.get(n.ClassroomID),tutor:iL.Tutor.get(n.TutorMemberID),course:e,attendees:[]};H(r,n.Starttime);H(i,n.Endtime)}if(e.lessons.indexOf(s)==-1){e.lessons.push(s)}f[s.id]=s});e.lessons.sort(function(e,t){return e.start.getTime()<t.start.getTime()?-1:1});return e})}return h[e.id]}function L(e){return k(e).then(function(){return e.lessons})}function A(e,t){return l[D(e,t)]}function O(e){if(e.lesson){var t=e.lesson,n=t.id;if(!v[n]){v[n]=new Promise(function(e,n){$.post(iL.API_ROOT+"process_getCourseScheduleStudents.php",{scheduleID:t.id},function(n){if(!t.attendees){t.attendees=[]}t.attendees.length=0;$.each(n.coursestudent,function(e,n){var r=iL.Student.get(n.MemberID)||{id:n.MemberID,name:n.Lastname,photo:n.Accountname},i=A(t,r)||{lesson:t,student:r};iL.Util.parseName(r);i.memberCourseID=n.MemberCourseID;i.absent=n.absent=="1";iL.Student.add(r);t.attendees.push(i);l[D(t,r)]=i});e(t.attendees)},"json").fail(n)})}return v[n]}}function M(e){var t=D(e);return O({lesson:e.lesson}).then(function(){return l[t]})}function _(e){if(!e.memberCourseID){M(e).then(_).catch(function(e){console.error(e.stack)});return}$.post(iL.Conf.API_ROOT+"process_updateStudentAttendance.php",{mcid:e.memberCourseID,absent:e.absent?0:1,coursescheduleID:e.lesson.id,absentReason:""})}function D(e,t){if(arguments.length==1){return arguments[0].lesson.id+":"+arguments[0].student.id}return e.id+":"+t.id}function P(e){return e<10?"0"+e:e}function H(e,t){e.setHours(t.substr(0,2));e.setMinutes(t.substr(2,2))}function B(e){var t=[];u.forEach(function(n){if(e[n]=="1"){t.push(n)}});return t.join("-")}var t=e.iLearner||{},n={},r={},i={},s=/\s*\w\d(?:\s?-\s?\w\d)?\s*/i,o=[{regex:/Trinity/,level:"K"},{regex:/GCSE/,level:"S"},{regex:/St\. Mary/,level:"P"},{regex:/DSE/,level:"S"},{regex:/Starters|Movers|Flyers/,level:"K"}],u="K1 K2 K3 P1 P2 P3 P4 P5 P6 F1 F2 F3 F4 F5 F6".split(" "),a={},f={},l={},c={},h={},p={},d={},v={};e.iL=t;t.Lesson=n;t.Course=r;t.Attendance=i;n.get=m;n.find=g;n.save=y;n.prev=w;n.next=E;n.future=S;n.students=x;r.get=T;r.add=N;r.find=C;r.fetch=k;r.lessons=L;i.get=A;i.find=O;i.fetch=M;i.save=_})(window);(function(e){function f(e){return s[e]}function l(e){s[e.id]=e}function c(e){var t=new Date,n={searchStudentName:e.name&&e.name.toLowerCase(),searchStudentMobile:e.phone,searchStudentSchool:e.school,searchStudentCourseYear:e.year===undefined?t.getFullYear():e.year,searchStudentCourseMonth:e.month===undefined?t.getMonth()+1:e.month},r=JSON.stringify(n);if(e.clearCache){a[r]=undefined}if(!a[r]){a[r]=Promise.resolve($.post(iL.API_ROOT+"process_getMemberList.php",n,null,"json")).then(function(e){var t=[];e.memberlist.forEach(function(e){var n=e.memberID,r=s[n]||{id:n},i=e.Lastname&&e.nickname?e.Lastname.length>e.nickname.length?e.Lastname:e.nickname:e.Lastname||e.nickname;i=$.trim(i);r.name=i;r.gender=e.Gender=="1"?"male":"female";r.grade=e.Grade;r.account=e.AccountName;r.photo=iL.Conf.PHOTO_URL+e.AccountName+".jpg";r.school=e.School;r.phone=e.mobile;r.registeredDate=new Date(e.RegDate);iL.Util.parseName(r);s[n]=r;t.push(r)});return t})}return a[r]}function h(e){var t=e.id;if(!u[t]){u[t]=new Promise(function(t,n){$.post(iL.API_ROOT+"process_getCourseScheduleStudents.php",{scheduleID:e.id},function(n){if(!e.students){e.students=[]}e.students.length=0;$.each(n.coursestudent,function(t,n){var r={id:n.MemberID,name:n.Lastname,photo:n.Accountname},i={memberCourseID:n.MemberCourseID,lesson:e,student:r,absent:n.absent=="1"};iL.Util.parseName(r);s[r.id]=r;e.students.push(i);attendances[attendanceKey(e,r)]=i});t(e.students)},"json").fail(n)})}return u[t]}function p(e){e=s[e.id]||e;if(!u[e.id]){u[e.id]=Promise.resolve($.post(iL.API_ROOT+"process_getMemberDetail.php",{memberID:e.id},null,"json")).then(function(t){var n=[],r,i={};if(t.memberdetail){$.each(t.memberdetail,function(t,i){var o=i.lastname&&i.Nickname?i.lastname.length>i.Nickname.length?i.lastname:i.Nickname:i.lastname||i.Nickname;o=$.trim(o);if(i.isStudent=="1"){e.name=o;e.gender=i.Gender=="1"?"male":"female";e.grade=i.Grade;e.account=i.AccountName;e.photo=iL.Conf.PHOTO_URL+i.AccountName+".jpg";e.school=i.School;e.phone=i.Mobile;e.notes=i.Remarks;e.birthDate=new Date(i.BirthYear,i.BirthMonth-1,i.BirthDay);e.notesPayment=i.RemarkAboutPayment;e.nameChinese=i.Chiname;e.schoolStart=i.schooltimefrom;e.schoolEnd=i.schooltimeto;e.soco=i.isSOCO=="1";e.entryChannel1=i.whyjoinusextendtext1;e.entryChannel2=i.whyjoinusextendtext2;iL.Util.parseName(e);e.guardians=n;s[e.id]=e;return false}else if(i.isGuardian=="1"){r={accountID:i.AccountName,relationship:i.Relationship,name:i.lastname,nameChinese:i.Chiname,nickname:i.Nickname,email:i.emailaddress,address:i.Address,occupation:i.Occupation,phone:i.Mobile,phoneHome:i.HomeNo,phoneOffice:i.OfficeNo};n.push(r)}})}if(t.memberCourseBalance){$.each(t.memberCourseBalance,function(t,n){var r=n.CourseID,s=parseInt(n.Nooflesson),o=parseInt(n.shouldpaid),u=o/s,a,f=iL.Course.get(r)||{id:r},l=iL.Subscription.get(f,e)||{id:null,course:f,student:e,invoices:[]},c=parseInt(n.Discount)||0,h=parseInt(n.Amount)||o,p=parseInt(n.AmountAfterDiscount)||h-c,d={id:n.MemberCourseInvoiceID,year:parseInt(n.invoiceyear),month:parseInt(n.invoicemonth),lessonCount:s,paid:n.Paid=="1",amount:p,originalAmount:h,discount:h-p,handledBy:n.handleby,memberID:n.memberID,memberCourseID:n.membercourseID};f.title=n.Coursename;f.code=n.CourseCode;f.existingDiscount=parseInt(n.DiscountForOldStudent);f.pricePerLesson=u;l.unpaid=0;l.withdrawn=n.withdrawal=="1";l.existingStudent=false;l.lastPaymentIndex=0;iL.Course.add(f);iL.Subscription.add(l);a=d.year*100+d.month;if(d.paid&&a>l.lastPaymentIndex&&l.existingDiscount){l.existingStudent=d.discount/d.lessonCount>=l.existingDiscount;l.lastPaymentIndex=a}if(!l.invoices){l.invoices=[]}l.invoices.push(d);if(!d.paid){l.unpaid+=1}i[b(l)]=l});e.subscriptions=i}return e})}return u[e.id]}function d(e){var t=e.guardians[0],n={Action:"update",MemberID:e.id,MemberDetailNameinEnglish:e.englishName,MemberDetailRemark:e.notes,MemberDetailRemarkPayment:e.notesPayment,MemberDetailNameinChinese:e.nameChinese,MemberDetailNickname:e.name,MemberDetailBirthDay:iL.Util.formatDate(e.birthDate),MemberDetailGender:e.gender=="male"?"1":"0",MemberDetailGrade:e.grade,MemberDetailSchool:e.school,MemberDetailSchooltimefrom:e.schoolStart,MemberDetailSchooltimeto:e.schoolEnd,isSOCO:e.soco?1:0,GuardianDetailMemberID:t.accountID,GuardianDetailRelationship:t.relationship,GuardianDetailNameinEnglish:t.name,GuardianDetailNameinChinese:t.nameChinese,GuardianDetailNickname:t.nickname,GuardianDetailEmail:t.email,GuardianDetailAddress:t.address,GuardianDetailOccupation:t.occupation,GuardianDetailHomeNo:t.phoneHome,GuardianDetailMobileNo:e.phone,GuardianDetailOfficeNo:t.phoneOffice,whyjoinusextendtext1:e.entryChannel1,whyjoinusextendtext2:e.entryChannel2};return Promise.resolve($.post(iL.API_ROOT+"process_updateMemberInformation.php",n,null,"json"))}function v(e){var t={MemberCourseID:e.memberCourseID,InvoiceYear:e.year,InvoiceMonth:e.month,shouldpay:e.originalAmount,AmountAfterDiscount:e.amount,paymentmethod:e.paymentMethod=="cash"?1:2,ChequeNo:e.chequeNumber,CouponCode:e.coupons.join(","),issuedate:e.date,htmlselect_Discountvalue_val:e.originalAmount-e.amount,htmlselect_Discounttype_val:1};return Promise.resolve($.post(iL.API_ROOT+"process_updateMemberInvoice.php",t,null,"json")).then(function(t){e.id=t.iID;e.handledBy=t.handle;e.paid=true})}function m(e,t){var n={membercourseinvoiceID:e.id,reason:t};return Promise.resolve($.post(iL.API_ROOT+"process_removeMemberInvoice.php",n,null,"json")).then(function(t){e.id=0;e.handledBy=undefined;e.paid=false})}function g(e){var t=b.apply(null,arguments);return o[t]}function y(e){var t=b(e);o[t]=e}function b(e,t){var n=arguments;if(n.length==2){return e.id+":"+t.id}return n[0].course.id+":"+n[0].student.id}var t=e.iLearner||{},n={},r={},i={},s={},o={},u={},a={};e.iL=t;t.Student=n;t.Subscription=i;t.Invoice=r;n.get=f;n.add=l;n.find=c;n.fetch=p;n.save=d;r.save=v;r.voidInvoice=m;i.get=g;i.add=y})(window);(function(e){function f(e){return i[e]}function l(e){var t={},n;e=e||{};if(e.tutor){t.searchTutor=e.tutor.id||e.tutor}if(e.from){t.searchDateFrom=formatDate(e.from)}if(e.to){t.searchDateTo=formatDate(e.to)}n=JSON.stringify(t);if(e.clearCache){r[n]=undefined}if(!r[n]){r[n]=Promise.resolve($.post(iL.API_ROOT+"process_getMemberReportCardList.php",t,null,"json")).then(function(t){var n;if(t.MemberReportCardList){n=t.MemberReportCardList;$.each(n,function(t,n){n.id=n.membercourseid;n.studentId=n.memberID;n.name=n.nickname;n.course={id:n.courseID,title:n.coursename,startTime:n.starttime,endTime:n.endtime};n.memberCourseId=n.membercourseid;n.complete=n.completed=="1";n.tutor=e.tutor;iL.parseName(n);i[n.id]=n})}return n})}return r[n]}function c(e){var t=$.Deferred(),n=t.promise();$.when($.post(iL.API_ROOT+"process_getMemberReportCardDetail.php",{membercourseID:e.id},null,"json"),d(e.courseName)).done(function(n,r){var i=n[0].MemberReportCardDetail[0],s="ap1label ap2label ap3label ap4label wh1label wh2label wh3label wh4label".split(" "),o={},a;$.extend(o,u);$.extend(o,r);for(a in s){if(!i[s[a]]){i[s[a]]=undefined}}$.extend(o,i);o.tutor=undefined;$.extend(e,o);t.resolve(e)}).fail(t.reject);return n}function h(e){var t={},n,r;e.complete=true;for(n in a){r=a[n];t[r]=e[r]}return $.post(iL.API_ROOT+"process_updateMemberReportCardDetail.php",t,null,"json")}function p(){if(!o){o=$.Deferred();$.get(iL.API_ROOT+"comment.php").done(function(e){var t={good:[],average:[],suggestions:[],focus:[]};t.good.regex=/good_comments\.push\("([^"]+)"\)/g;t.average.regex=/average_comments\.push\("([^"]+)"\)/g;t.suggestions.regex=/suggestions\.push\("([^"]+)"\)/g;t.focus.regex=/focus\.push\("([^"]+)"\)/g;$.each(t,function(t,n){$.each(e.match(n.regex),function(e,t){n.regex.lastIndex=0;n.push(n.regex.exec(t)[1].replace("XXX","{ forename }").replace(/\bshe\b/g,"{ pronounSubject }").replace(/\bShe\b/g,"{ pronounSubjectCapitalize }").replace(/\bherself\b/g,"{ pronounReflexive }").replace(/\bher\b/g,"{ pronounPossesive }").replace(/\bHer\b/g,"{ pronounPossesiveCapitalize }").replace(/\bgirl\b/g,"{ nounGender }").replace(/\bhe\b/g,"{ pronounSubject }").replace(/\bHe\b/g,"{ pronounSubjectCapitalize }").replace(/\bhimself\b/g,"{ pronounReflexive }").replace(/\bhis\b/g,"{ pronounPossesive }").replace(/\bHis\b/g,"{ pronounPossesiveCapitalize }").replace(/\bhim\b/g,"{ pronounObject }").replace(/\bboy\b/g,"{ nounGender }"))});n.regex=undefined});o.resolve(t)})}return o.promise()}function d(e){var t,n;if(!s[e]){t=$.Deferred();n=$.post(iL.API_ROOT+"process_getCourseLearningFocus.php",{coursename:e},null,"json");n.done(function(e){var n=e.CourseFocusObject[0],r={};if(n){r.ap1label=n.ap1;r.ap2label=n.ap2;r.ap3label=n.ap3;r.ap4label=n.ap4}t.resolve(r)});s[e]=t.promise()}return s[e]}function v(e,t,n){d(e).done(function(e){e[t]=n})}var t=e.iLearner||{},n={},r={},i={},s={},o,u={wh1label:"Politeness",wh2label:"Attentiveness",wh3label:"Participation",wh4label:"Effort"},a="idmembercoursereportcard ap1label ap1value ap1progress ap2label ap2value ap2progress ap3label ap3value ap3progress ap4label ap4value ap4progress wh1label wh1value wh1progress wh2label wh2value wh2progress wh3label wh3value wh3progress wh4label wh4value wh4progress generalcomments suggestions learningfocus lessoncount".split(" ");e.iL=t;t.Report=n;n.get=f;n.find=l;n.fetch=c;n.save=h;n.getComments=p;n.setCourseLearningFocus=v})(window)